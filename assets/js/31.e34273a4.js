(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{284:function(s,t,a){"use strict";a.r(t);var r=a(28),e=Object(r.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"package-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#package-json"}},[s._v("#")]),s._v(" Package.json")]),s._v(" "),a("p",[s._v("Node.js项目的描述文件。")]),s._v(" "),a("h2",{attrs:{id:"主要字段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#主要字段"}},[s._v("#")]),s._v(" 主要字段")]),s._v(" "),a("h3",{attrs:{id:"scripts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scripts"}},[s._v("#")]),s._v(" scripts")]),s._v(" "),a("p",[s._v("package.json 中scripts对象配置的脚本，可以通过npm run script-name来执行。每当执行npm run时，会自动新建一个Shell，会将当前目录的node_modules/.bin子目录假如PATH变量，执行结束后，PATH变量会恢复。")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.npmjs.com.cn/misc/scripts/",target:"_blank",rel:"noopener noreferrer"}},[s._v("文档"),a("OutboundLink")],1)]),s._v(" "),a("h4",{attrs:{id:"通配符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通配符"}},[s._v("#")]),s._v(" 通配符")]),s._v(" "),a("p",[s._v("npm脚本即为shell脚本，可以使用shell的通配符。 * 代表任意文件名，** 代表任意一层子目录。")]),s._v(" "),a("p",[s._v("为防止被转义，要将*符号转义")]),s._v(" "),a("h3",{attrs:{id:"变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变量"}},[s._v("#")]),s._v(" 变量")]),s._v(" "),a("h4",{attrs:{id:"package-json中的字段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#package-json中的字段"}},[s._v("#")]),s._v(" package.json中的字段")]),s._v(" "),a("p",[s._v("通过npm_package_前缀，npm 脚本可以拿到package.json里面的字段")]),s._v(" "),a("h4",{attrs:{id:"env"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#env"}},[s._v("#")]),s._v(" env")]),s._v(" "),a("p",[s._v("env可以列出所有环境变量")]),s._v(" "),a("h4",{attrs:{id:"跨环境设置变量cross-env"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#跨环境设置变量cross-env"}},[s._v("#")]),s._v(" 跨环境设置变量cross-env")]),s._v(" "),a("p",[s._v("windows不支持NODE_ENV=development的设置模式")]),s._v(" "),a("h3",{attrs:{id:"参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[s._v("#")]),s._v(" 参数")]),s._v(" "),a("p",[s._v("npm 脚本传入参数，要使用--标明。")]),s._v(" "),a("h3",{attrs:{id:"执行顺序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行顺序"}},[s._v("#")]),s._v(" 执行顺序")]),s._v(" "),a("p",[s._v("如果要执行多个任务，需要明确执行顺序")]),s._v(" "),a("ol",[a("li",[s._v("&同时执行")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run script1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run script2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("&& 前一个任务执成功后再执行下一个任务。")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run script1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run script2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"钩子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#钩子"}},[s._v("#")]),s._v(" 钩子")]),s._v(" "),a("p",[s._v("pre和post")]),s._v(" "),a("p",[s._v("默认钩子")]),s._v(" "),a("ul",[a("li",[s._v("prepublish, postpublish")]),s._v(" "),a("li",[s._v("preinstall, postinstall")]),s._v(" "),a("li",[s._v("preuninstall, postuninstall")]),s._v(" "),a("li",[s._v("preversion, postversion")]),s._v(" "),a("li",[s._v("pretest, posttest")]),s._v(" "),a("li",[s._v("prestop, poststop")]),s._v(" "),a("li",[s._v("prestart, poststart")]),s._v(" "),a("li",[s._v("prerestart, postrestart")])]),s._v(" "),a("p",[s._v("npm_lifecycle_event变量，返回当前正在允许的脚本名称。")]),s._v(" "),a("p",[s._v("执行npm run start时，会自带先执行npm run prestart,再执行npm run start，然后执行npm run poststart")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run prebuild "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run postbuild\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"简写"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简写"}},[s._v("#")]),s._v(" 简写")]),s._v(" "),a("p",[s._v("默认钩子的都可以简写，去掉run。 直接执行npm start, npm stop等")]),s._v(" "),a("h2",{attrs:{id:"生成package-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成package-json"}},[s._v("#")]),s._v(" 生成package.json")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 一步一步")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成默认配置的文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init -y\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);
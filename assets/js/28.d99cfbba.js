(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{281:function(t,a,e){"use strict";e.r(a);var s=e(28),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"koa2学习"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#koa2学习"}},[t._v("#")]),t._v(" koa2学习")]),t._v(" "),e("h2",{attrs:{id:"koa资源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#koa资源"}},[t._v("#")]),t._v(" koa资源")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://koajs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa官网"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://koa.bootcss.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa中文"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/koajs/koa",target:"_blank",rel:"noopener noreferrer"}},[t._v("github"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"koa源码结构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#koa源码结构"}},[t._v("#")]),t._v(" koa源码结构")]),t._v(" "),e("ul",[e("li",[t._v("application.js")]),t._v(" "),e("li",[t._v("context.js")]),t._v(" "),e("li",[t._v("request.js")]),t._v(" "),e("li",[t._v("response.js")])]),t._v(" "),e("h2",{attrs:{id:"洋葱模型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#洋葱模型"}},[t._v("#")]),t._v(" 洋葱模型")]),t._v(" "),e("p",[t._v("app.listen监听端口的时候会返回一个callback()函数，函数里有个midllerware数组，里面是各个注册的中间件。这些中间件是由koa-compose组合起来，用next()形成串行机智，并支持异步操作，将context一路传给中间件。 遇到await，await要等待下一个中间件的函数去执行，直到没有next(),再一层一层返回到第一个中间件")]),t._v(" "),e("h2",{attrs:{id:"应用app"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#应用app"}},[t._v("#")]),t._v(" 应用app")]),t._v(" "),e("h3",{attrs:{id:"app-listen"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#app-listen"}},[t._v("#")]),t._v(" app.listen()")]),t._v(" "),e("p",[t._v("将应用程序绑定到具体端口号")]),t._v(" "),e("h3",{attrs:{id:"app-callback"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#app-callback"}},[t._v("#")]),t._v(" app.callback()")]),t._v(" "),e("p",[t._v("适用于http.createServer()方法的回调函数处理请求")]),t._v(" "),e("h3",{attrs:{id:"app-use-function"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#app-use-function"}},[t._v("#")]),t._v(" app.use(function)")]),t._v(" "),e("p",[t._v("将中间件添加到middleware数组中,")]),t._v(" "),e("h3",{attrs:{id:"app-context"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#app-context"}},[t._v("#")]),t._v(" app.context")]),t._v(" "),e("p",[t._v("编辑app.context为ctx添加其他属性。")]),t._v(" "),e("h3",{attrs:{id:"错误处理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#错误处理"}},[t._v("#")]),t._v(" 错误处理")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  log"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'server error'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("h2",{attrs:{id:"上下文context"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#上下文context"}},[t._v("#")]),t._v(" 上下文Context")]),t._v(" "),e("h3",{attrs:{id:"ctx-req"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-req"}},[t._v("#")]),t._v(" ctx.req")]),t._v(" "),e("p",[t._v("Node的request 对象")]),t._v(" "),e("h3",{attrs:{id:"ctx-res"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-res"}},[t._v("#")]),t._v(" ctx.res")]),t._v(" "),e("p",[t._v("Node的response对象")]),t._v(" "),e("h3",{attrs:{id:"ctx-request"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-request"}},[t._v("#")]),t._v(" ctx.request")]),t._v(" "),e("p",[t._v("Koa 的Request对象")]),t._v(" "),e("h3",{attrs:{id:"ctx-response"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-response"}},[t._v("#")]),t._v(" ctx.response")]),t._v(" "),e("p",[t._v("Koa的Response对象")]),t._v(" "),e("h3",{attrs:{id:"ctx-state"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-state"}},[t._v("#")]),t._v(" ctx.state")]),t._v(" "),e("p",[t._v("推荐的命名空间,存储公共数据。")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'张三'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"ctx-app"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-app"}},[t._v("#")]),t._v(" ctx.app")]),t._v(" "),e("h3",{attrs:{id:"ctx-cookies-get-name-options"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-cookies-get-name-options"}},[t._v("#")]),t._v(" ctx.cookies.get(name, [options])")]),t._v(" "),e("p",[t._v("通过options获取cookie")]),t._v(" "),e("ul",[e("li",[t._v("signed所请求的cookie应该被签名")])]),t._v(" "),e("h3",{attrs:{id:"ctx-cookies-set-name-value-options"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-cookies-set-name-value-options"}},[t._v("#")]),t._v(" ctx.cookies.set(name, value, [options])")]),t._v(" "),e("p",[t._v("通过options设置cookie的name为value。")]),t._v(" "),e("ul",[e("li",[t._v("maxAge 一个数字表示从 Date.now() 得到的毫秒数")]),t._v(" "),e("li",[t._v("signed cookie 签名值")]),t._v(" "),e("li",[t._v("expires cookie 过期的 Date")]),t._v(" "),e("li",[t._v("path cookie 路径, 默认是'/'")]),t._v(" "),e("li",[t._v("domain cookie 域名")]),t._v(" "),e("li",[t._v("secure 安全 cookie")]),t._v(" "),e("li",[t._v("httpOnly 服务器可访问 cookie, 默认是 true")]),t._v(" "),e("li",[t._v("overwrite 一个布尔值，表示是否覆盖以前设置的同名的 cookie (默认是 false). 如果是 true, 在同一个请求中设置相同名称的所有 Cookie（不管路径或域）是否在设置此Cookie 时从 Set-Cookie 标头中过滤掉。")])]),t._v(" "),e("h3",{attrs:{id:"ctx-throw-status-msg-properties"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-throw-status-msg-properties"}},[t._v("#")]),t._v(" ctx.throw([status], [msg], [properties])")]),t._v(" "),e("h3",{attrs:{id:"ctx-assert-value-status-msg-properties"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-assert-value-status-msg-properties"}},[t._v("#")]),t._v(" ctx.assert(value, [status], [msg], [properties])")]),t._v(" "),e("h2",{attrs:{id:"request请求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request请求"}},[t._v("#")]),t._v(" Request请求")]),t._v(" "),e("h3",{attrs:{id:"request-header"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request-header"}},[t._v("#")]),t._v(" request.header")]),t._v(" "),e("p",[t._v("请求标头对象")]),t._v(" "),e("h3",{attrs:{id:"request-header-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request-header-2"}},[t._v("#")]),t._v(" request.header =")]),t._v(" "),e("p",[t._v("设置请求标头对象")]),t._v(" "),e("h3",{attrs:{id:"request-headers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request-headers"}},[t._v("#")]),t._v(" request.headers")]),t._v(" "),e("h3",{attrs:{id:"request-headers-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request-headers-2"}},[t._v("#")]),t._v(" request.headers =")]),t._v(" "),e("h3",{attrs:{id:"request-method"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request-method"}},[t._v("#")]),t._v(" request.method")]),t._v(" "),e("p",[t._v("请求方法")]),t._v(" "),e("h3",{attrs:{id:"request-method-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request-method-2"}},[t._v("#")]),t._v(" request.method =")]),t._v(" "),e("p",[t._v("设置请求方法")]),t._v(" "),e("h3",{attrs:{id:"request-length"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request-length"}},[t._v("#")]),t._v(" request.length")]),t._v(" "),e("p",[t._v("返回以数字返回请求的Content-Length，或undefined")]),t._v(" "),e("h3",{attrs:{id:"request-url"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request-url"}},[t._v("#")]),t._v(" request.url")]),t._v(" "),e("p",[t._v("获取请求URL")]),t._v(" "),e("h2",{attrs:{id:"response响应"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response响应"}},[t._v("#")]),t._v(" Response响应")]),t._v(" "),e("h3",{attrs:{id:"response-header"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-header"}},[t._v("#")]),t._v(" response.header")]),t._v(" "),e("p",[t._v("响应头对象")]),t._v(" "),e("h3",{attrs:{id:"response-headers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-headers"}},[t._v("#")]),t._v(" response.headers")]),t._v(" "),e("h3",{attrs:{id:"response-socket"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-socket"}},[t._v("#")]),t._v(" response.socket")]),t._v(" "),e("h3",{attrs:{id:"response-status"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-status"}},[t._v("#")]),t._v(" response.status")]),t._v(" "),e("p",[t._v("获取响应状态")]),t._v(" "),e("h3",{attrs:{id:"response-message"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-message"}},[t._v("#")]),t._v(" response.message")]),t._v(" "),e("p",[t._v("响应的消息")]),t._v(" "),e("h3",{attrs:{id:"response-length"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-length"}},[t._v("#")]),t._v(" response.length")]),t._v(" "),e("h3",{attrs:{id:"response-body"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-body"}},[t._v("#")]),t._v(" response.body")]),t._v(" "),e("p",[t._v("获取响应主体")]),t._v(" "),e("h3",{attrs:{id:"response-type"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-type"}},[t._v("#")]),t._v(" response.type")]),t._v(" "),e("p",[t._v("获取响应content-type")]),t._v(" "),e("h3",{attrs:{id:"response-redirect-url-alt"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-redirect-url-alt"}},[t._v("#")]),t._v(" response.redirect(url, [alt])")]),t._v(" "),e("p",[t._v("执行[302]重定向到url")]),t._v(" "),e("h2",{attrs:{id:"koa路由"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#koa路由"}},[t._v("#")]),t._v(" koa路由")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/ZijianHe/koa-router#readme",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-router"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"koa中间件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#koa中间件"}},[t._v("#")]),t._v(" koa中间件")]),t._v(" "),e("h3",{attrs:{id:"favicon"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#favicon"}},[t._v("#")]),t._v(" favicon")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/koajs/favicon",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-favicon"),e("OutboundLink")],1)])]),t._v(" "),e("h3",{attrs:{id:"模板引擎"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#模板引擎"}},[t._v("#")]),t._v(" 模板引擎")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/queckezz/koa-views",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-views"),e("OutboundLink")],1),t._v(" 模板中间件，hbs, swig,pug")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/koajs/koa-hbs",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-hbs"),e("OutboundLink")],1),t._v(" handlebars模板")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/koajs/ejs",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-ejs"),e("OutboundLink")],1),t._v(" ejs")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/strawbrary/koa-nunjucks-2",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-nunjucks-2"),e("OutboundLink")],1),t._v(" nunjucks")])]),t._v(" "),e("h3",{attrs:{id:"请求体解析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#请求体解析"}},[t._v("#")]),t._v(" 请求体解析")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/dlau/koa-body",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-body"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/koajs/bodyparser",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-bodyparser"),e("OutboundLink")],1)])]),t._v(" "),e("h3",{attrs:{id:"静态文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#静态文件"}},[t._v("#")]),t._v(" 静态文件")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/koajs/static",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-static"),e("OutboundLink")],1)])]),t._v(" "),e("h3",{attrs:{id:"数据库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据库"}},[t._v("#")]),t._v(" 数据库")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/koajs/session",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-session"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/koajs/koa-redis",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-redis"),e("OutboundLink")],1),t._v(" koa session with redis")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/Secbone/koa-session2",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-session2"),e("OutboundLink")],1),t._v(" session设置")])]),t._v(" "),e("h3",{attrs:{id:"路由"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#路由"}},[t._v("#")]),t._v(" 路由")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/ZijianHe/koa-router",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-router"),e("OutboundLink")],1)])]),t._v(" "),e("h3",{attrs:{id:"日志"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#日志"}},[t._v("#")]),t._v(" 日志")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/koajs/logger",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-logger"),e("OutboundLink")],1)])]),t._v(" "),e("h3",{attrs:{id:"压缩"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#压缩"}},[t._v("#")]),t._v(" 压缩")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/koajs/compress",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-compress"),e("OutboundLink")],1),t._v(" 压缩")])]),t._v(" "),e("h3",{attrs:{id:"安全"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安全"}},[t._v("#")]),t._v(" 安全")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/koajs/jwt",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-jwt"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/rkusa/koa-passport",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-passport"),e("OutboundLink")],1),t._v(" passport")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/venables/koa-helmet",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-helmet"),e("OutboundLink")],1),t._v(" 重要的安全header")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/koajs/cors",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-cors"),e("OutboundLink")],1),t._v(" Cross-Origin Resource Sharing(CORS) for koa")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/rkusa/koa-passport",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-passport"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/kilianc/koa-jsonp",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-jsonp"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/simov/grant",target:"_blank",rel:"noopener noreferrer"}},[t._v("grant"),e("OutboundLink")],1),t._v(" OAuth 中间件")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/koajs/csrf",target:"_blank",rel:"noopener noreferrer"}},[t._v("csrf"),e("OutboundLink")],1),t._v(" CSRF token")])]),t._v(" "),e("h3",{attrs:{id:"usergent"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usergent"}},[t._v("#")]),t._v(" usergent")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/rvboris/koa-useragent",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-useragent"),e("OutboundLink")],1),t._v(" user-agent")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/koajs/response-time",target:"_blank",rel:"noopener noreferrer"}},[t._v("response-time"),e("OutboundLink")],1)])]),t._v(" "),e("h3",{attrs:{id:"convert"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#convert"}},[t._v("#")]),t._v(" convert")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/koajs/convert",target:"_blank",rel:"noopener noreferrer"}},[t._v("convert"),e("OutboundLink")],1),t._v(" 中间件转化")])]),t._v(" "),e("h3",{attrs:{id:"错误处理-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#错误处理-2"}},[t._v("#")]),t._v(" 错误处理")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/koajs/error",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-error"),e("OutboundLink")],1)])]),t._v(" "),e("h3",{attrs:{id:"应用级中间件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#应用级中间件"}},[t._v("#")]),t._v(" 应用级中间件")]),t._v(" "),e("h3",{attrs:{id:"路由级中间件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#路由级中间件"}},[t._v("#")]),t._v(" 路由级中间件")]),t._v(" "),e("p",[t._v("路由匹配后，继续匹配")]),t._v(" "),e("h3",{attrs:{id:"错误处理中间件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#错误处理中间件"}},[t._v("#")]),t._v(" 错误处理中间件")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'这是一个404 页面'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])]),e("h2",{attrs:{id:"框架"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#框架"}},[t._v("#")]),t._v(" 框架")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/eggjs/egg/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Egg.js"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://eggjs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/thinkjs/thinkjs",target:"_blank",rel:"noopener noreferrer"}},[t._v("thinkjs"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://thinkjs.org/zh-cn",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),e("OutboundLink")],1),t._v("基于koa")])])])}),[],!1,null,null,null);a.default=r.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{306:function(a,e,t){"use strict";t.r(e);var s=t(28),r=Object(s.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"webpack"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack"}},[a._v("#")]),a._v(" webpack")]),a._v(" "),t("p",[a._v("webpack是模块打包器。主要打包JavaScript文件，也能转化捆绑打包任何资源和资产。")]),a._v(" "),t("h2",{attrs:{id:"webpack参考资源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack参考资源"}},[a._v("#")]),a._v(" webpack参考资源")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://webpack.js.org/",target:"_blank",rel:"noopener noreferrer"}},[a._v("webpack官网"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/webpack/webpack",target:"_blank",rel:"noopener noreferrer"}},[a._v("webpack github"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://webpack.docschina.org/",target:"_blank",rel:"noopener noreferrer"}},[a._v("webpack中文"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"http://webpack.wuhaolin.cn/",target:"_blank",rel:"noopener noreferrer"}},[a._v("《深入浅出Webpack》"),t("OutboundLink")],1)])]),a._v(" "),t("h3",{attrs:{id:"常用loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用loader"}},[a._v("#")]),a._v(" 常用loader")]),a._v(" "),t("p",[a._v("css 相关")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("style-loader")]),a._v("将模块导出作为样式添加到DOM中")]),a._v(" "),t("li",[t("code",[a._v("css-loader")]),a._v(" 解析css文件，使用import加载，返回css")]),a._v(" "),t("li",[t("code",[a._v("postcss-loader")]),a._v(" 用postcss转译css文件，扩展 CSS 语法，")]),a._v(" "),t("li",[t("code",[a._v("less-loader")]),a._v(" 加载和转译LESS")]),a._v(" "),t("li",[t("code",[a._v("sass-loader")]),a._v(" 加载和转译SASS/SCSS")]),a._v(" "),t("li",[t("code",[a._v("stylus-loader")]),a._v(" 加载和转译stylus文件")])]),a._v(" "),t("p",[a._v("模版")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("html-loader")])]),a._v(" "),t("li",[t("code",[a._v("pug-loader")]),a._v(" .pug模板转译成html")]),a._v(" "),t("li",[t("code",[a._v("jade-loader")])]),a._v(" "),t("li",[t("code",[a._v("markdown-loader")])]),a._v(" "),t("li",[t("code",[a._v("handlebars-loader")])])]),a._v(" "),t("p",[a._v("其他")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("url-loader")]),a._v(" 与 file-loader 类似，区别是用户可以设置一个阈值，大于阈值时返回其 publicPath，小于阈值时返回文件 base64 形式编码 (处理图片和字体)")]),a._v(" "),t("li",[t("code",[a._v("file-loader")]),a._v(" 文件输出到一个文件夹中，在代码中通过相对 URL 去引用输出的文件 (处理图片和字体)")]),a._v(" "),t("li",[t("code",[a._v("image-loader")]),a._v(" 加载并且压缩图片文件")]),a._v(" "),t("li",[t("code",[a._v("eslint-loader")]),a._v(" 通过 ESLint 检查 JavaScript 代码")]),a._v(" "),t("li",[t("code",[a._v("babel-loader")]),a._v(" 把 ES6 转换成 ES5")]),a._v(" "),t("li",[t("code",[a._v("ts-loader")]),a._v(" typescript文件转译")]),a._v(" "),t("li",[t("code",[a._v("vue-loader")]),a._v(" 加载和转译VUE单文件组件")]),a._v(" "),t("li",[t("code",[a._v("json-loader")]),a._v(" 加载 JSON 文件")]),a._v(" "),t("li",[t("code",[a._v("i18n-loader")]),a._v(" 国际化")]),a._v(" "),t("li",[t("code",[a._v("cache-loader")]),a._v(" 性能开销较大的 Loader 之前添加，目的是将结果缓存到磁盘里")])]),a._v(" "),t("h3",{attrs:{id:"常用plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用plugin"}},[a._v("#")]),a._v(" 常用plugin")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("IgnorePlugin")]),a._v(" 忽略部分文件")]),a._v(" "),t("li",[t("code",[a._v("CommonsChunkPlugin")])]),a._v(" "),t("li",[t("code",[a._v("HotModuleReplacementPlugin")])]),a._v(" "),t("li",[t("code",[a._v("DllPlugin")])]),a._v(" "),t("li",[t("code",[a._v("HtmlWebpackPlugin")])]),a._v(" "),t("li",[t("code",[a._v("MinChunkSizePlugin")])]),a._v(" "),t("li",[t("code",[a._v("UglifyjsWebpackPlugin")])]),a._v(" "),t("li",[t("code",[a._v("clean-webpack-plugin")]),a._v(" 清理文件，打包时清理之前的打包文件")]),a._v(" "),t("li",[t("code",[a._v("webpack-bundle-analyzer")]),a._v(" 可视化webpack输出文件的体积和依赖")]),a._v(" "),t("li",[t("code",[a._v("mini-css-extract-plugin")]),a._v("  提取css")])]),a._v(" "),t("h2",{attrs:{id:"webpack打包过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack打包过程"}},[a._v("#")]),a._v(" webpack打包过程")]),a._v(" "),t("ol",[t("li",[a._v("启动后，从命令行和配置文件中读取参数合并参数")]),a._v(" "),t("li",[a._v("实例化complier\nWebpack 启动后会从 Entry 里配置的 Module 开始递归解析 Entry 依赖的所有 Module。\n每找到一个 Module， 就会根据配置的 Loader 去找出对应的转换规则，对 Module 进行转换后，再解析出当前 Module 依赖的 Module。\n这些模块会以 Entry 为单位进行分组，一个 Entry 和其所有依赖的 Module 被分到一个组也就是一个 Chunk。\n最后 Webpack 会把所有 Chunk 转换成文件输出。\n在整个流程中 Webpack 会在恰当的时机执行 Plugin 里定义的逻辑。")])]),a._v(" "),t("h2",{attrs:{id:"核心概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#核心概念"}},[a._v("#")]),a._v(" 核心概念")]),a._v(" "),t("h3",{attrs:{id:"入口entry"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#入口entry"}},[a._v("#")]),a._v(" 入口entry")]),a._v(" "),t("p",[a._v("将需要构建的文件的放在该入口")]),a._v(" "),t("ul",[t("li",[a._v("字符串：单文件路径")]),a._v(" "),t("li",[a._v("数组：多个入口文件")]),a._v(" "),t("li",[a._v("对象：配置多入口，每个入口生成一个chunk")])]),a._v(" "),t("h3",{attrs:{id:"输出output"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#输出output"}},[a._v("#")]),a._v(" 输出output")]),a._v(" "),t("p",[a._v("输出最后的代码，以及命名这些文件和路径")]),a._v(" "),t("ul",[t("li",[a._v("输出单个文件 "),t("code",[a._v("filename: 'bundle.js'")])]),a._v(" "),t("li",[a._v("输出多个文件 "),t("code",[a._v("filename: '[name].[hash:8].js'")])])]),a._v(" "),t("h3",{attrs:{id:"loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#loader"}},[a._v("#")]),a._v(" loader")]),a._v(" "),t("p",[a._v("webpack本身只能处理js和json文件。loader允许webpack处理其他类型的文件")]),a._v(" "),t("p",[a._v("loader有两个属性")]),a._v(" "),t("ul",[t("li",[a._v("test: 标示出应该被loader进行转换的某个或某些文件")]),a._v(" "),t("li",[a._v("use: 使用哪个loader")])]),a._v(" "),t("h4",{attrs:{id:"loader执行顺序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#loader执行顺序"}},[a._v("#")]),a._v(" loader执行顺序")]),a._v(" "),t("p",[a._v("一组loader执行顺序为从右到左")]),a._v(" "),t("h3",{attrs:{id:"插件plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插件plugin"}},[a._v("#")]),a._v(" 插件plugin")]),a._v(" "),t("p",[a._v("在webpack运行的生命周期中会有很多事件，plugin处理的是这些事件中，处理一些任务、监听事件，执行回调函数")]),a._v(" "),t("p",[a._v("插件可以用于执行范围更广的任务，打包优化，资源管理，注入环境变量。 比loader执行的任务更加广泛一点")]),a._v(" "),t("h4",{attrs:{id:"plugin-complier和compliation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#plugin-complier和compliation"}},[a._v("#")]),a._v(" plugin complier和compliation")]),a._v(" "),t("p",[a._v("Compiler 对象包含了 Webpack 环境所有的的配置信息，包含 options，loaders，plugins 这些信息，这个对象在 Webpack 启动时候被实例化，它是全局唯一的，可以简单地把它理解为 Webpack 实例；")]),a._v(" "),t("p",[a._v("Compilation 对象包含了当前的模块资源、编译生成资源、变化的文件等。当 Webpack 以开发模式运行时，每当检测到一个文件变化，一次新的 Compilation 将被创建。Compilation 对象也提供了很多事件回调供插件做扩展。通过 Compilation 也能读取到 Compiler 对象。")]),a._v(" "),t("p",[a._v("Compiler 和 Compilation 的区别在于：")]),a._v(" "),t("p",[a._v("Compiler 代表了整个 Webpack 从启动到关闭的生命周期，而 Compilation 只是代表了一次新的编译。")]),a._v(" "),t("h4",{attrs:{id:"编写plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编写plugin"}},[a._v("#")]),a._v(" 编写plugin")]),a._v(" "),t("ol",[t("li",[a._v("一个 JavaScript 命名函数。")]),a._v(" "),t("li",[a._v("在插件函数的 prototype 上定义一个 apply 方法。")]),a._v(" "),t("li",[a._v("指定一个绑定到 webpack 自身的事件钩子。")]),a._v(" "),t("li",[a._v("处理 webpack 内部实例的特定数据。")]),a._v(" "),t("li",[a._v("功能完成后调用 webpack 提供的回调。")])]),a._v(" "),t("h3",{attrs:{id:"模式mode"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#模式mode"}},[a._v("#")]),a._v(" 模式mode")]),a._v(" "),t("p",[a._v("mode有三种development、production（默认）、node，分别启用webpack内置相应环境。不同的变量设置不同的打包行为。")]),a._v(" "),t("h2",{attrs:{id:"配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[a._v("#")]),a._v(" 配置")]),a._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// webpack.config.js")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h3",{attrs:{id:"entry"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#entry"}},[a._v("#")]),a._v(" Entry")]),a._v(" "),t("h3",{attrs:{id:"output"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#output"}},[a._v("#")]),a._v(" Output")]),a._v(" "),t("h3",{attrs:{id:"devserver"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#devserver"}},[a._v("#")]),a._v(" devServer")]),a._v(" "),t("h2",{attrs:{id:"优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#优化"}},[a._v("#")]),a._v(" 优化")]),a._v(" "),t("ul",[t("li",[a._v("html-webpack-externals-plugin")])]),a._v(" "),t("p",[a._v("externals 配置vue，vue-router，vuex， axios的cdn地址")]),a._v(" "),t("ul",[t("li",[a._v("合理配置入口文件，include，减少搜索的处理的文件")]),a._v(" "),t("li",[a._v("alias和extensions 缩小文件查找的范围")]),a._v(" "),t("li",[a._v("设置正确的mode")]),a._v(" "),t("li",[a._v("IgnorePlugin moment不打包那些国际化的语言环境")]),a._v(" "),t("li",[a._v("路由懒加载 "),t("code",[a._v("const Foo = () => import('./Foo.vue')")]),a._v(" webpack代码分割")])]),a._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[a._v("Foo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=>")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v('/* webpackChunkName: "group-foo" */')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'./Foo.vue'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[a._v("Bar")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=>")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v('/* webpackChunkName: "group-foo" */')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'./Bar.vue'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[a._v("Baz")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=>")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v('/* webpackChunkName: "group-foo" */')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'./Baz.vue'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("p",[a._v("Webpack 会将任何一个异步模块与相同的块名称组合到相同的异步块中。")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("dllPlugin\n所有文件打成一个js文件，会导致最终生成的js文件很大，考虑查分bundles。使用DllPlugin单独打包react，react-dom")])]),a._v(" "),t("li",[t("p",[a._v("抽离公共代码")])])]),a._v(" "),t("p",[a._v("多个页面引入了一些公共模块，吧公共的模块抽离出来单独打包 optimization.splitChunks")]),a._v(" "),t("ul",[t("li",[a._v("webpack-bundle-analyzer分析查看那些包的体积较大")])]),a._v(" "),t("h2",{attrs:{id:"插件plugin-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插件plugin-2"}},[a._v("#")]),a._v(" 插件Plugin")]),a._v(" "),t("h3",{attrs:{id:"tapable"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tapable"}},[a._v("#")]),a._v(" Tapable")]),a._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code")]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"})]),t("h3",{attrs:{id:"compile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#compile"}},[a._v("#")]),a._v(" compile")]),a._v(" "),t("h3",{attrs:{id:"compilation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#compilation"}},[a._v("#")]),a._v(" compilation")]),a._v(" "),t("h3",{attrs:{id:"resolver"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#resolver"}},[a._v("#")]),a._v(" resolver")]),a._v(" "),t("h3",{attrs:{id:"parser"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#parser"}},[a._v("#")]),a._v(" parser")]),a._v(" "),t("h2",{attrs:{id:"热更新原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#热更新原理"}},[a._v("#")]),a._v(" 热更新原理")]),a._v(" "),t("p",[a._v("Hot Module Replacement(HMR) 热更新。")]),a._v(" "),t("h2",{attrs:{id:"webpack-cli"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack-cli"}},[a._v("#")]),a._v(" webpack-cli")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/webpack/webpack-cli",target:"_blank",rel:"noopener noreferrer"}},[a._v("webpack-cli github"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://webpack.docschina.org/api/cli",target:"_blank",rel:"noopener noreferrer"}},[a._v("webpack-cli文档"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=r.exports}}]);